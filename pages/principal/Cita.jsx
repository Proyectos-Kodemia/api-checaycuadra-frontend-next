import React, { useEffect } from 'react'
import Head from 'next/head'
import FooterPage from '../../components/FooterPage'
import NavPage from '../../components/NavPage'
import Appointment from '../../components/appointment/appointment'
import { useRouter } from "next/router";
import Snackbar from '../../components/Notifications/Snackbar'
// Import material component (toast)
// Opcion crear componente de toast para reausarlo

function Cita ({ children, title = 'Checa y Cuadra' }) {
    const router = useRouter();  
    const statusPayment = router.query.collection_status
    console.log(statusPayment)    
    
    

  useEffect(() => {
        if(statusPayment){
          // post
        } 
  }, []);


  // Probar flujo completo con la autenticacion del usuario
  const token = "sdfadfasdfasdf"
  // const token = localStorage.getItem('datauser')
  console.log(token)

  // // local states (toast)
  // const [successToast, setSuccesToast] = useState(False);
  // const [failToast, setFailToast] = useState(False);
  // const [pendeningtToast, setPendeningtToast] = useState(False);

  // comments
  


//   // // if (statusPayment == 'approved')  {
  // //   // deploy succes toast
  // //   setSuccesToast(True);
  // }
  // buscar lo del set time out

  // Construir el post para mandar el pago al back

  // Enviar en el post el token de JWT

  return (
    <>
      <Head>
        <title>{title}</title>
        <meta name='description' content='Generated by create next app' />
        <link rel='icon' href='/favicon.ico' />
      </Head>
      <NavPage />
      {children}
      <Appointment />
       <Snackbar statusPayment={statusPayment}/> 
      <FooterPage />
    </>
  )
}

export default Cita
